#:import la kivy.adapters.listadapter

<RotImage>:
    angle: 0
    orientation: 1
    color: [0, 0, 0, 1]
    nocache: True
    canvas.before:
        PushMatrix
        Rotate:
            angle:root.angle
            axis: 0, 0, 1
            origin: root.center
    canvas.after:
        PopMatrix

<Direntry@ButtonBehavior+FloatLayout>:
    text: ''
    source: None
    orientation: 1
    RotImage:
        x: root.x
        y: root.y
        source: root.source
        orientation: root.orientation
    Label:
        pos_hint: {'center_x': 0.5, 'y': 0}
        text_size: (root.width, None)
        text: root.text
        size: self.texture_size
        size_hint: (None, None)
    Label:
        pos_hint: {'center_x': 0.5, 'top': 1}
        text_size: (root.width, None)
        text: str(root.orientation)
        size: self.texture_size
        size_hint: (None, None)

<DirlistRow>:
    size_hint_y: None
    height: 240
    Direntry:
        text: root.dir1
        source: root.thumb1
        orientation: root.orientation1
        on_release: root.direntry_selected(root.dir1)
    Direntry:
        text: root.dir2
        source: root.thumb2
        orientation: root.orientation2
        on_release: root.direntry_selected(root.dir2)

<ImglistRow>:
    size_hint_y: None
    height: 160
    Direntry:
        text: root.f1
        source: root.t1
        orientation: root.o1
        on_release: root.img_selected(root.f1)
    Direntry:
        text: root.f2
        source: root.t2
        orientation: root.o2
        on_release: root.img_selected(root.f2)
    Direntry:
        text: root.f3
        source: root.t3
        orientation: root.o3
        on_release: root.img_selected(root.f3)


BoxLayout:
    orientation: "vertical"
    with_previous: False
    container: container
    ActionBar:
        height: "48dp"
        pos_hint: {'x': 0, 'top':1}
        ActionView:
            use_separator: True
            ActionPrevious:
                app_icon: 'data/icon.png'
                title: 'Planilla'
                with_previous: root.with_previous
                on_release: root.with_previous and app.load_previous()
            ActionOverflow:
                ActionButton:
                    text: "Reload"
                    on_release: app.reload_content()
                ActionButton:
                    text: "Settings"
                    on_release: app.open_settings()
                ActionButton:
                    text: "Log"
                    on_release: app.send_log()
                ActionButton:
                    text: "Exit"
                    on_release: app.stop()
                ActionButton:
                    text: "About"
                    on_release: app.about()
    FloatLayout:
        id: container