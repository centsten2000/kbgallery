#:import la kivy.adapters.listadapter

<RotImage>:
    angle: 0
    orientation: 1
    canvas.before:
        PushMatrix
        Rotate:
            angle:root.angle
            axis: 0, 0, 1
            origin: root.center
    canvas.after:
        PopMatrix

<Direntry@ButtonBehavior+FloatLayout>:
    text: 'default'
    source: None
    orientation: 1
    on_release: app.direntry_selected(self.text)
    RotImage:
        x: root.x
        y: root.y
        source: root.source
        orientation: root.orientation
    Label:
        pos_hint: {'center_x': 0.5, 'y': 0}
        text_size: (240, None)
        text: root.text
        size: self.texture_size
        size_hint: (None, None)
    Label:
        pos_hint: {'center_x': 0.5, 'top': 1}
        text_size: (240, None)
        text: str(root.orientation)
        size: self.texture_size
        size_hint: (None, None)

[DirentryListRow@BoxLayout]:
    size_hint_y: None
    height: 240
    Direntry:
        text: ctx.dir1
        source: ctx.thumb1
        orientation: ctx.orientation1
    Direntry:
        text: ctx.dir2
        source: ctx.thumb2
        orientation: ctx.orientation2

BoxLayout:
    orientation: "vertical"
    with_previous: False
    ActionBar:
        height: "48dp"
        ActionView:
            use_separator: True
            ActionPrevious:
                app_icon: 'data/icon.png'
                title: 'Planilla'
                with_previous: root.with_previous
                on_release: app.load_previous()
            ActionOverflow:
                ActionButton:
                    text: "Preferencias"
                    on_release: app.open_settings()
                ActionButton:
                    text: "Log"
                    on_release: app.send_log()
                ActionButton:
                    text: "Acerca de"
                    on_release: app.about()
